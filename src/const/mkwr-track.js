// @ts-check

/**
 * @type {Record<string, import('../types').Track>}
 */
const trackDict = Object.freeze({
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  マリオブラザーズサーキット: {
    code: 'マリオブラザーズサーキット',
    trackName: 'マリオブラザーズサーキット',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['マリブラ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  トロフィーシティ: {
    code: 'トロフィーシティ',
    trackName: 'トロフィーシティ',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['トロフィー'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  シュポポコースター: {
    code: 'シュポポコースター',
    trackName: 'シュポポコースター',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['シュポポ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  DKうちゅうセンター: {
    code: 'DKうちゅうセンター',
    trackName: 'DKうちゅうセンター',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['うちゅう'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  サンサンさばく: {
    code: 'サンサンさばく',
    trackName: 'サンサンさばく',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['サンサン'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ヘイホーカーニバル: {
    code: 'ヘイホーカーニバル',
    trackName: 'ヘイホーカーニバル',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['ヘイホー', 'ヘイカニ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ワリオスタジアム: {
    code: 'ワリオスタジアム',
    trackName: 'ワリオスタジアム',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['ワリスタ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  キラーシップ: {
    code: 'キラーシップ',
    trackName: 'キラーシップ',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['キラー'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  DKスノーマウンテン: {
    code: 'DKスノーマウンテン',
    trackName: 'DKスノーマウンテン',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['DKS'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ロゼッタてんもんだい: {
    code: 'ロゼッタてんもんだい',
    trackName: 'ロゼッタてんもんだい',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['ロゼッタ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  アイスビルディング: {
    code: 'アイスビルディング',
    trackName: 'アイスビルディング',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['アイス', 'アイビル'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ワリオシップ: {
    code: 'ワリオシップ',
    trackName: 'ワリオシップ',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: [],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ノコノコビーチ: {
    code: 'ノコノコビーチ',
    trackName: 'ノコノコビーチ',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['ノコノコ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  リバーサイドサファリ: {
    code: 'リバーサイドサファリ',
    trackName: 'リバーサイドサファリ',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['リバーサイド', 'リバサ', 'サファリ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ピーチスタジアム: {
    code: 'ピーチスタジアム',
    trackName: 'ピーチスタジアム',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['ピチスタ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ピーチビーチ: {
    code: 'ピーチビーチ',
    trackName: 'ピーチビーチ',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: [],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ソルティータウン: {
    code: 'ソルティータウン',
    trackName: 'ソルティータウン',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['ソルティー'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ディノディノジャングル: {
    code: 'ディノディノジャングル',
    trackName: 'ディノディノジャングル',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['ディノディノ', 'ジャングル', 'ディノ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ハテナしんでん: {
    code: 'ハテナしんでん',
    trackName: 'ハテナしんでん',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['ハテナ', 'しんでん', 'ハテナ神殿'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  プクプクフォールズ: {
    code: 'プクプクフォールズ',
    trackName: 'プクプクフォールズ',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['プクプク'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ショーニューロード: {
    code: 'ショーニューロード',
    trackName: 'ショーニューロード',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['ショーニュー', '鍾乳', 'しょうにゅう'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  おばけシネマ: {
    code: 'おばけシネマ',
    trackName: 'おばけシネマ',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['おばけ', 'シネマ', '映画館'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  ホネホネツイスター: {
    code: 'ホネホネツイスター',
    trackName: 'ホネホネツイスター',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['ホネホネ', 'ツイスター'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  モーモーカントリー: {
    code: 'モーモーカントリー',
    trackName: 'モーモーカントリー',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['モモカン'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  チョコマウンテン: {
    code: 'チョコマウンテン',
    trackName: 'チョコマウンテン',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['チョコマ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  キノピオファクトリー: {
    code: 'キノピオファクトリー',
    trackName: 'キノピオファクトリー',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['キノピオ', 'ファクトリー'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  クッパキャッスル: {
    code: 'クッパキャッスル',
    trackName: 'クッパキャッスル',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['クバキャ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  どんぐりツリーハウス: {
    code: 'どんぐりツリーハウス',
    trackName: 'どんぐりツリーハウス',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['どんぐり'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  マリオサーキット: {
    code: 'マリオサーキット',
    trackName: 'マリオサーキット',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['マリサ'],
    nitaAllCombinationWRMilliseconds: 0,
  },
  // biome-ignore lint/style/useNamingConvention: コース名は許容
  レインボーロード: {
    code: 'レインボーロード',
    trackName: 'レインボーロード',
    nitaVSWRMilliseconds: 0,
    nitaVSWRUrl: '',
    aliases: ['虹', 'レインボー'],
    nitaAllCombinationWRMilliseconds: 0,
  },
});

export const trackCodeSet = new Set(Object.keys(trackDict));

/**
 * コース名を変換する
 *
 * - 大文字を小文字に
 * - 全角カタカナをひらがなに
 * - 全角英数を半角に
 *
 * @param {string} trackName
 */
const normalizeTrackName = (trackName) => {
  return trackName
    .replace(/[ァ-ン]/g, (s) => String.fromCharCode(s.charCodeAt(0) - 0x60))
    .replace(/[Ａ-Ｚａ-ｚ０-９]/g, (s) => String.fromCharCode(s.charCodeAt(0) - 0xfee0))
    .toLowerCase();
};

/** @type {Map<string, string>} */
const trackCodeMap = Object.entries(trackDict).reduce((acc, [key, track]) => {
  acc.set(normalizeTrackName(key), key);
  acc.set(normalizeTrackName(track.trackName), key);
  track.aliases.forEach((v) => {
    acc.set(normalizeTrackName(v), key);
  });
  return acc;
}, new Map());

/**
 * @param {string} query
 * @return {import('../types').Track | null}
 */
export const searchTrack = (query) => {
  const code = trackCodeMap.get(normalizeTrackName(query));
  if (code) {
    return trackDict[code] || null;
  }
  return null;
};

/**
 * @param {string} code
 * @return {import('../types').Track | null}
 */
export const getByCode = (code) => {
  return trackDict[code] || null;
};
